{
  "hookInstance": "b32cab7a-75ea-4cd1-9514-20ebf473cac9",
  "fhirServer": "http://localhost:8080/cqf-ruler-r4/fhir",
  "hook": "order-sign",
  "applyCql": true,
  "context": {
    "userId": "Practitioner/example",
    "patientId": "Patient/example-rec-08-order-sign-substance-abuse",
    "encounterId": "Encounter/example-rec-08-order-sign-substance-abuse-context",
    "selections": [
      "MedicationRequest/example-rec-08-order-sign-substance-abuse-context"
    ],
    "draftOrders": {
      "resourceType": "MedicationRequest",
      "id": "example-rec-08-order-sign-substance-abuse-context",
      "status": "active",
      "intent": "order",
      "category": {
        "coding": [
          {
            "system": "http://terminology.hl7.org/CodeSystem/medicationrequest-category",
            "code": "community"
          }
        ]
      },
      "medicationCodeableConcept": {
        "coding": [
          {
            "system": "http://www.nlm.nih.gov/research/umls/rxnorm",
            "code": "197696",
            "display": "72 HR Fentanyl 0.075 MG/HR Transdermal System"
          }
        ]
      },
      "subject": {
        "reference": "Patient/example-rec-08-order-sign-substance-abuse"
      },
      "encounter": {
        "reference": "Encounter/example-rec-08-order-sign-substance-abuse-context"
      },
      "_authoredOn": {
        "extension": [
          {
            "url": "http://hl7.org/fhir/StructureDefinition/cqf-expression",
            "valueExpression": {
              "language": "text/cql",
              "expression": "Today()"
            }
          }
        ]
      },
      "dosageInstruction": [
        {
          "timing": {
            "repeat": {
              "frequency": 1,
              "period": 12.0,
              "periodUnit": "d"
            }
          },
          "doseAndRate": [
            {
              "doseQuantity": {
                "value": 1.0,
                "unit": "patch"
              }
            }
          ]
        }
      ],
      "dispenseRequest": {
        "_validityPeriod": {
          "extension": [
            {
              "url": "http://hl7.org/fhir/StructureDefinition/cqf-expression",
              "valueExpression": {
                "language": "text/cql",
                "expression": "FHIR.Period { start: FHIR.dateTime { value: Today() }, end: FHIR.dateTime { value: Today() + 3 months } }"
              }
            }
          ]
        },
        "quantity": {
          "value": 30,
          "unit": "patch",
          "system": "http://terminology.hl7.org/CodeSystem/v3-orderableDrugForm",
          "code": "patch"
        },
        "numberOfRepeatsAllowed": 3,
        "expectedSupplyDuration": {
          "value": 30.0,
          "unit": "days",
          "system": "http://unitsofmeasure.org",
          "code": "d"
        }
      }
    }
  },
  "prefetch": {
    "item1": {
      "response": {
        "status": "200 OK"
      },
      "resource": {
        "resourceType": "Patient",
        "id": "example-rec-08-order-sign-substance-abuse",
        "gender": "female",
        "birthDate": "1982-01-07"
      }
    },
    "item2": {
      "response": {
        "status": "200 OK"
      },
      "resource": {
        "resourceType": "Encounter",
        "id": "example-rec-08-order-sign-substance-abuse-prefetch",
        "status": "finished",
        "subject": {
          "reference": "Patient/example-rec-08-order-sign-substance-abuse"
        },
        "period": {
          "extension": [
            {
              "url": "http://hl7.org/fhir/StructureDefinition/cqf-expression",
              "valueExpression": {
                "language": "text/cql",
                "expression": "FHIR.Period { start: FHIR.dateTime { value: Today() - 14 days }, end: FHIR.dateTime { value: Today() - 14 days } }"
              }
            }
          ]
        }
      }
    },
    "item3": {
      "response": {
        "status": "200 OK"
      },
      "resource": {
        "resourceType": "Condition",
        "id": "example-rec-08-order-sign-substance-abuse-condition",
        "clinicalStatus": {
          "coding": [
            {
              "system": "http://terminology.hl7.org/CodeSystem/condition-clinical",
              "code": "active",
              "display": "Active Condition"
            }
          ]
        },
        "category": [
          {
            "coding": [
              {
                "system": "http://terminology.hl7.org/CodeSystem/condition-category",
                "code": "encounter-diagnosis",
                "display": "Encounter Diagnosis"

              }
            ]
          }
        ],
        "verificationStatus": {
          "code": {
            "coding": [
              {
                "system": "http://terminology.hl7.org/CodeSystem/condition-ver-status",
                "code": "confirmed",
                "display": "Confirmed"
              }
            ]
          }
        },
        "subject": {
          "reference": "Patient/example-rec-08-order-sign-substance-abuse"
        },
        "code": {
          "coding": [
            {
              "system": "http://snomed.info/sct",
              "code": "66590003",
              "display": "Alcohol dependence"
            }
          ]
        }
      }
    }
  }
}
